<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Guarda Civil — Plataforma de Estudos</title>

<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #f3f4f6;
  }

  /* TÍTULO FIXO */
  #appTitle {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 10px;
    font-size: 20px;
    font-weight: bold;
    color: #1f2937;
    text-align: center;
    background: white;
    border-bottom: 2px solid #e5e7eb;
    position: sticky;
    top: 0;
    z-index: 999;
  }

  #appTitle img {
    width: 32px;
    height: 32px;
  }

  /* CONTAINER PRINCIPAL */
  .container {
    padding: 10px 14px;
  }

  /* BOTÕES DO MENU */
  .menu-buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    margin-top: 10px;
  }

  .menu-buttons button {
    flex: 1 1 calc(50% - 10px);
    min-width: 130px;
    max-width: 160px;
    padding: 10px 6px;
    font-size: 15px;
    border-radius: 12px;
    border: none;
    background: #2563eb;
    color: white;
    font-weight: 600;
  }

  @media (max-width: 480px) {

    #appTitle {
      font-size: 17px;
      padding: 8px 5px;
    }

    #appTitle img {
      width: 26px;
      height: 26px;
    }

    .menu-buttons button {
      flex: 1 1 calc(50% - 6px);
      min-width: 120px;
      padding: 9px 5px;
      font-size: 14px;
    }
  }

  /* PERGUNTAS */
  .question {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 14px;
    line-height: 1.4;
  }

  /* ALTERNATIVAS */
  .option-btn {
    width: 100%;
    text-align: left;
    padding: 12px 14px;
    font-size: 18px;
    margin-bottom: 10px;
    background: #e5e7eb;
    border-radius: 10px;
    border: none;
  }

  .correct {
    background: #22c55e !important;
    color: white;
  }

  .wrong {
    background: #ef4444 !important;
    color: white;
  }

  /* BOTÃO PRÓXIMO */
  #nextBtn {
    width: 100%;
    padding: 14px;
    margin-top: 10px;
    border: none;
    border-radius: 12px;
    background: #2563eb;
    color: white;
    font-size: 18px;
    font-weight: bold;
  }

  /* BOTÃO FLUTUANTE PARA VOLTAR AO MENU */
  #homeBtn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #2563eb;
    color: white;
    padding: 12px 14px;
    font-size: 14px;
    border-radius: 50px;
    border: none;
    z-index: 999;
  }
</style>
</head>

<body>

<!-- TÍTULO -->
<div id="appTitle">
  <img src="https://cdn-icons-png.flaticon.com/512/2922/2922522.png">
  Guarda Civil — Plataforma de Estudos
</div>

<!-- BOTÃO FLUTUANTE MENU -->
<button id="homeBtn" onclick="showScreen('menu')">Início</button>

<!-- TELA MENU -->
<div id="menu" class="container">
  <div class="menu-buttons">
    <button onclick="loadQuiz()">Quiz</button>
    <button onclick="loadFlashcards()">Flashcards</button>
    <button onclick="loadSimulado()">Simulado</button>
    <button onclick="loadResultados()">Resultados</button>
  </div>
</div>

<!-- TELA QUIZ -->
<div id="quizScreen" class="container" style="display:none;">
  <div class="question" id="quizQuestion"></div>
  <div id="options"></div>
  <button id="nextBtn" onclick="nextQuestion()">Próxima</button>
</div>

<!-- FLASHCARDS -->
<div id="flashScreen" class="container" style="display:none;">
  <h2>Flashcards</h2>
  <div id="flashContent"></div>
</div>

<!-- SIMULADO -->
<div id="simScreen" class="container" style="display:none;">
  <h2>Simulado</h2>
  <div id="simContent"></div>
</div>

<!-- RESULTADOS -->
<div id="resultScreen" class="container" style="display:none;">
  <h2>Resultados</h2>
  <div id="resultsContent"></div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyS8VtUHvc4_LFRWOEAsTt_xMfUxmAj2ce1gNXTP3O6jEEKxMgKfPPDO-TzYbuP8suFIg/exec";

let quizData = [];
let currentIndex = 0;
let canAnswer = true;

/* --------- TROCA DE TELAS ----------- */
function showScreen(screen) {
  document.querySelectorAll("div[id]").forEach(div => {
    if (!div.id.includes("Btn")) div.style.display = "none";
  });
  document.getElementById(screen).style.display = "block";
}

/* --------- CARREGAR QUIZ ---------- */
async function loadQuiz() {
  showScreen("quizScreen");
  const res = await fetch(API_URL + "?action=getQuestions");
  const data = await res.json();
  quizData = data.questions;
  currentIndex = 0;
  loadQuestion();
}

function loadQuestion() {
  const q = quizData[currentIndex];
  document.getElementById("quizQuestion").innerText = q.question;

  const optionsBox = document.getElementById("options");
  optionsBox.innerHTML = "";

  ["A","B","C","D"].forEach(letter => {
    let btn = document.createElement("button");
    btn.className = "option-btn";
    btn.innerText = letter + ") " + q[letter];
    btn.onclick = () => selectOption(letter, btn);
    optionsBox.appendChild(btn);
  });

  canAnswer = true;
}

/* ---------- SELEÇÃO ---------- */
function selectOption(letter, btn) {
  if (!canAnswer) return;
  canAnswer = false;

  const q = quizData[currentIndex];
  const correct = q.answer;

  if (letter === correct) {
    btn.classList.add("correct");
    playCorrectSound();
  } else {
    btn.classList.add("wrong");
    playWrongSound();
    [...document.querySelectorAll(".option-btn")].forEach(b => {
      if (b.innerText.startsWith(correct)) b.classList.add("correct");
    });
  }
}

/* ---------- SONS ---------- */
function playCorrectSound() {
  new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg").play();
}
function playWrongSound() {
  new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg").play();
}

/* ---------- PRÓXIMA ---------- */
function nextQuestion() {
  currentIndex++;
  if (currentIndex >= quizData.length) {
    alert("Fim do Quiz!");
    showScreen("menu");
  } else {
    loadQuestion();
  }
}
</script>

</body>
</html>
